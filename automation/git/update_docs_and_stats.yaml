---
alias: updateDocsAndStats
id: a1b2c3d4-e5f6-7890-1234-56789abcdef0
mode: single
trigger:
  - trigger: time
    at: "23:55:00"
    alias: "Trigger daily before midnight"
action:
  - action: shell_command.update_docs
    alias: "Pass markdown text to shell command and trigger update script"
    data:
      markdown_content: >
        {% set icons = {
          'air_quality': 'ğŸŒ¬ï¸', 'alarm_control_panels': 'ğŸš¨', 'areas': 'ğŸ˜ï¸', 'automations': 'ğŸ¤–',
          'binary_sensors': 0ï¸âƒ£1ï¸âƒ£, 'buttons': 'ğŸ”˜', 'calendars': 'ğŸ—“ï¸', 'cameras': 'ğŸ“·',
          'climate': 'ğŸŒ¡ï¸', 'covers': 'ğŸ', 'custom_integrations': 'ğŸ› ï¸', 'dates': 'ğŸ“…',
          'datetimes': 'â°', 'device_trackers': 'ğŸ“', 'devices': 'ğŸ“±', 'entities': 'ğŸ§©',
          'fans': 'ğŸš', 'humidifiers': 'ğŸ’§', 'images': 'ğŸ–¼ï¸', 'input_booleans': 'â˜‘ï¸',
          'input_buttons': 'ğŸ–±ï¸', 'input_datetimes': 'ğŸ“…', 'input_numbers': 'ğŸ”¢',
          'input_selects': 'ğŸ”¡', 'input_texts': 'ğŸ“', 'integrations': 'ğŸ”Œ', 'lights': 'ğŸ’¡',
          'locks': 'ğŸ”’', 'media_players': 'ğŸµ', 'numbers': 'ğŸ”Ÿ', 'persons': 'ğŸ‘¤',
          'remotes': 'ğŸ®', 'scenes': 'ğŸ¬', 'scripts': 'ğŸ“œ', 'selects': 'â†•ï¸',
          'sensors': 'ğŸ“Ÿ', 'sirens': 'ğŸ“¢', 'stt': 'ğŸ—£ï¸', 'suns': 'â˜€ï¸',
          'switches': 'ğŸ”Œ', 'texts': 'ğŸ”¡', 'times': 'ğŸ•’', 'tts': 'ğŸ“¢',
          'update': 'ğŸ†™', 'vacuums': 'ğŸ§¹', 'water_heaters': 'ğŸ”¥', 'weather': 'ğŸŒ¤ï¸',
          'zones': 'ğŸ—ºï¸'
        } %}
        {%- set sensors = states.sensor
          | selectattr('entity_id', 'search', '^sensor\.(air_quality|alarm_control_panels|areas|automations|binary_sensors|buttons|calendars|cameras|climate|covers|custom_integrations|dates|datetimes|device_trackers|devices|entities|fans|humidifiers|images|input_|integrations|lights|locks|media_players|numbers|persons|remotes|scenes|scripts|selects|sensors|sirens|stt|suns|switches|texts|times|tts|update|vacuums|water_heaters|weather|zones)')
          | sort(attribute='name') -%}
        {%- for s in sensors -%}
          {%- set key = s.entity_id.split('.')[1] -%}
          - {{ icons.get(key, 'ğŸ”¹') }} {{ s.name | capitalize }}: {{ s.state }}
        {% endfor %}
