---
title: Home
path: start
icon: mdi:home
type: sections
max_columns: 3
theme: Rounded-Bubble
cards: []
dense_section_placement: false
header:
  card: !include ../../cards/welcome_header.yaml
  layout: responsive
  badges_position: top
  badges_wrap: scroll
badges:
  - type: custom:mushroom-template-badge
    icon: |-
      {% if is_state('binary_sensor.hausture', 'off') %}
        mdi:lock
      {% else %}
        mdi:lock-open
      {% endif %}
    color: |-
      {% if is_state('binary_sensor.hausture', 'off') %}
        green
      {% else %}
        red
      {% endif %}
    entity: binary_sensor.hausture
    tap_action:
      action: more-info
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: sensor.count_lights_on
    color: amber
    icon: mdi:lamps
    visibility:
      - condition: numeric_state
        entity: sensor.count_lights_on
        above: 0
    tap_action:
      action: navigate
      navigation_path: lights
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: input_boolean.notifications_miguel
    color: primary
    tap_action:
      action: toggle
    visibility:
      - condition: state
        entity: input_boolean.notifications_miguel
        state: "off"
      - condition: user
        users:
          - ecc3dedec7ae42b69a6b8a82927dda74
    icon: mdi:cellphone-message-off
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: vacuum.roomba
    color: purple
    visibility:
      - condition: state
        entity: vacuum.roomba
        state_not: docked
    tap_action:
      action: navigate
      navigation_path: vacuum
  - type: custom:mushroom-template-badge
    content: |-
      {% if is_state('alarm_control_panel.alarmo', 'triggered')  %}
        TRIGGERED
      {% elif is_state('alarm_control_panel.alarmo', 'armed_away')  %}
        Armed
      {% elif is_state('alarm_control_panel.alarmo', 'armed_home') %}
        Home
      {% elif is_state('alarm_control_panel.alarmo', 'armed_night') %}
        Night
      {% elif is_state('alarm_control_panel.alarmo', 'disarmed') %}
        Disarmed
      {% else %}
        Arming...
      {% endif %}
    icon: >-
      {% if is_state('alarm_control_panel.alarmo', 'armed_home') %}
        mdi:shield-home-outline
      {% elif is_state('alarm_control_panel.alarmo', 'armed_away')
      %}
        mdi:shield-lock-outline
      {% elif is_state('alarm_control_panel.alarmo', 'triggered')
      %}
        mdi:shield-alert-outline
      {% elif is_state('alarm_control_panel.alarmo', 'armed_night')
      %}
        mdi:shield-moon-outline
      {% elif is_state('alarm_control_panel.alarmo', 'disarmed') %}
        mdi:shield-off-outline
      {% else %}
        mdi:shield-alert-outline
      {% endif %}
    color: >-
      {% if is_state('alarm_control_panel.alarmo', 'armed_home') %}
        green
      {% elif is_state('alarm_control_panel.alarmo', 'armed_away')
      %}
        red
      {% elif is_state('alarm_control_panel.alarmo', 'triggered')
      %}
        orange
      {% elif is_state('alarm_control_panel.alarmo', 'armed_night')
      %}
        blue
      {% elif is_state('alarm_control_panel.alarmo', 'disarmed') %}
        grey
      {% else %}
        yellow
      {% endif %}
    entity: alarm_control_panel.alarmo
    tap_action:
      action: more-info
  - type: custom:mushroom-template-badge
    entity: person.miguel
    picture: '{{ state_attr("person.miguel","entity_picture") }}'
    content: '{{ states("sensor.ibeacon_pixel_9_pro_area") }}'
    label: Miguel
    visibility:
      - condition: screen
        media_query: "(min-width: 768px)"
      - condition: user
        users:
          - ecc3dedec7ae42b69a6b8a82927dda74
    icon: ""
    color: ""
    tap_action:
      action: navigate
      navigation_path: "#miguel"
sections:
  - type: grid
    cards:
      - type: vertical-stack
        cards:
          - type: heading
            heading: Map
            heading_style: title
            icon: mdi:map-marker-account
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: person.miguel
                icon: mdi:face-agent
                color: green
                tap_action:
                  action: more-info
              - type: entity
                show_state: false
                show_icon: true
                entity: person.silke
                icon: mdi:face-woman
                color: purple
                tap_action:
                  action: more-info
              - type: entity
                show_state: false
                show_icon: true
                entity: person.milo_carlos
                icon: mdi:baby-face
                color: blue
                tap_action:
                  action: more-info
              - type: entity
                show_state: false
                show_icon: true
                entity: person.maja
                icon: mdi:dog
                color: brown
                tap_action:
                  action: more-info
        grid_options:
          columns: full
          rows: auto
      - type: map
        entities:
          - entity: zone.home
          - entity: person.maja
          - entity: person.miguel
          - entity: person.silke
          - entity: person.milo_carlos
        theme_mode: auto
      - type: heading
        icon: mdi:cctv
        heading: Cameras
        heading_style: title
        badges:
          - type: entity
            show_state: true
            show_icon: true
            entity: switch.security_cameras
            color: red
            tap_action:
              action: toggle
          - type: entity
            show_state: true
            show_icon: true
            entity: switch.flur_cam_stecker
            icon: mdi:door
            color: green
            tap_action:
              action: toggle
          - type: entity
            show_state: true
            show_icon: true
            entity: switch.kamera_steckdose_wz
            icon: mdi:sofa-outline
            color: green
            tap_action:
              action: toggle
        visibility:
          - condition: screen
            media_query: "(min-width: 768px)"
          - condition: state
            entity: input_boolean.holiday_mode
            state: "off"
      - square: false
        type: grid
        cards:
          - show_state: false
            show_name: false
            camera_view: live
            fit_mode: cover
            type: picture-entity
            camera_image: camera.flurcam
            entity: camera.flurcam
          - show_state: false
            show_name: false
            camera_view: live
            fit_mode: cover
            type: picture-entity
            camera_image: camera.korbchen
            entity: camera.korbchen
        columns: 2
        grid_options:
          columns: full
        visibility:
          - condition: screen
            media_query: "(min-width: 768px)"
          - condition: state
            entity: input_boolean.holiday_mode
            state: "off"
      - square: false
        columns: 1
        type: grid
        cards:
          - type: heading
            heading: Media
            heading_style: title
            icon: mdi:music
            badges:
              - type: entity
                show_state: true
                show_icon: true
                entity: media_player.spotify_miguel
                icon: mdi:spotify
                color: green
              - type: entity
                show_state: true
                show_icon: true
                entity: media_player.1_1_tv_box_754
                icon: mdi:television
                color: purple
            grid_options:
              columns: 12
              rows: 1
          - type: conditional
            conditions:
              - entity: binary_sensor.media_player_active
                state: "on"
            card:
              type: custom:swipe-card
              card_width: calc(100% - 48px)
              parameters:
                centeredSlides: true
                slidesPerView: auto
                spaceBetween: 16
                initialSlide: 0
              cards:
                - type: conditional
                  conditions:
                    - entity: media_player.spotify_miguel
                      state_not: idle
                    - entity: media_player.spotify_miguel
                      state_not: unavailable
                  card:
                    type: custom:button-card
                    entity: media_player.spotify_miguel
                    template: custom_card_mediaplayer_music
          - type: conditional
            conditions:
              - condition: state
                entity: binary_sensor.media_player_active
                state: "off"
            card:
              square: false
              columns: 1
              type: grid
              cards:
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:button-card
                      entity: media_player.spotify_miguel
                      icon: mdi:arrow-down
                      name: Room
                      label: Choose
                      show_label: true
                      tap_action:
                        action: none
                        haptic: success
                      template: button_template
                      variables:
                        icon2: mdi:arrow-down
                        state_on: playing
                        state_off: idle
                        background_color_off: var(--contrast2)
                        background_color_on: var(--green)
                        color_on: var(--contrast1)
                        color_off: var(--contrast20)
                - square: true
                  columns: 6
                  type: grid
                  cards:
                    - type: custom:button-card
                      entity: media_player.living_room
                      icon: mdi:sofa-outline
                      show_name: false
                      aspect_ratio: 1/1
                      state:
                        - value: playing
                          icon: mdi:play-circle-outline
                      tap_action:
                        action: call-service
                        service: script.play_on_repeat_on_living_room_nest
                        haptic: success
                      styles:
                        card:
                          - border-radius: 18px
                          - background-color: var(--green)
                        icon:
                          - color: var(--black)
                    - type: custom:button-card
                      entity: media_player.gtv
                      icon: mdi:bed
                      show_name: false
                      aspect_ratio: 1/1
                      state:
                        - value: playing
                          icon: mdi:play-circle-outline
                      tap_action:
                        action: call-service
                        service: script.play_on_repeat_on_alarm_clock
                        haptic: success
                      styles:
                        card:
                          - border-radius: 18px
                          - background-color: var(--blue)
                        icon:
                          - color: var(--black)
      - type: vertical-stack
        cards:
          - type: heading
            heading: Security
            heading_style: title
            icon: mdi:security
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: group.motion_sensors
                tap_action:
                  action: more-info
                color: yellow
              - type: entity
                show_state: false
                show_icon: true
                entity: binary_sensor.hausture
                tap_action:
                  action: more-info
                color: red
            grid_options:
              columns: 12
              rows: 1
            tap_action:
              action: navigate
              navigation_path: security
          - type: custom:button-card
            entity: alarm_control_panel.alarmo
            template: alarm
            name: Security System
            tap_action:
              action: navigate
              navigation_path: security
            hold_action:
              action: more-info
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: Miguel
                show_name: false
                show_state: false
                show_icon: true
                show_entity_picture: true
                entity: person.miguel
                tap_action:
                  action: more-info
                state:
                  - value: not_home
                    styles:
                      entity_picture:
                        - filter: grayscale(100%)
                styles:
                  card:
                    - background-color: var(--contrast2)
                    - padding: 10px 10px 10px 0px
                  grid:
                    - grid-template-areas: '"icon name btn" "icon state btn"'
                    - grid-template-columns: 60px 1fr min-content
                    - grid-template-rows: min-content
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 8px 10px
                    - border-radius: 50%
                    - border: |
                        [[[
                          if (entity.state == 'home') {
                            return '2px solid var(--green)';
                          } else {
                            return 'none';
                          }
                        ]]]
                  entity_picture:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 0 0
                    - border-radius: 500px
                  icon:
                    - width: 50px
                    - color: var(--contrast1)
                  custom_fields:
                    name:
                      - align-self: start
                      - justify-self: start
                      - background: none
                      - box-shadow: none
                      - padding: 0
                    state:
                      - align-self: start
                      - justify-self: start
                      - background: none
                      - box-shadow: none
                      - padding: 0
                      - margin-top: "-5px"
                    btn:
                      - align-self: end
                      - justify-self: end
                    icon:
                      - align-self: start
                      - justify-self: start
                    badge:
                      - position: absolute
                      - left: 38px
                      - top: 5px
                custom_fields:
                  name:
                    card:
                      type: custom:button-card
                      name: Miguel
                      styles:
                        card:
                          - color: var(--contrast20)
                          - font-size: 14px
                          - font-weight: 600
                          - background: none
                          - box-shadow: none
                  state:
                    card:
                      type: custom:button-card
                      entity: "[[[ return entity.entity_id ]]]"
                      show_icon: false
                      name: |
                        [[[
                          return states['person.miguel'].state;
                        ]]]
                      state:
                        - value: home
                          name: Home
                        - value: not_home
                          name: Away
                      styles:
                        card:
                          - color: var(--contrast20)
                          - font-size: 12px
                          - background: none
                          - opacity: "0.7"
                          - box-shadow: none
                  badge:
                    card:
                      type: custom:button-card
                      entity: "[[[ return entity.entity_id ]]]"
                      show_icon: true
                      show_name: false
                      icon: mdi:home
                      state:
                        - value: home
                          icon: mdi:home
                          styles:
                            card:
                              - background: var(--green)
                        - value: not_home
                          icon: mdi:home-export-outline
                          styles:
                            card:
                              - background: var(--red)
                      styles:
                        card:
                          - border-radius: 50%
                          - width: 16px
                          - height: 16px
                          - background: none
                        icon:
                          - color: black
                          - width: 12px
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: entity
                          tap_action:
                            action: more-info
                          entity: sensor.pixel_9_pro_battery_level
                          content_info: none
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'var(--contrast1)' if states('sensor.pixel_9_pro_battery_level') | float > 10  else 'var(--red)' }};
                                --color: {{ 'var(--contrast20)' if states('sensor.pixel_9_pro_battery_level') | float > 10  else 'var(--black)' }};
                                padding: 0px!important;
                                border-radius: 100px!impportant;
                                box-shadow: none !important;
                                --primary-text-color: var(--contrast20);
              - type: custom:button-card
                name: Silke
                show_name: false
                show_state: false
                show_icon: true
                show_entity_picture: true
                entity: person.silke
                tap_action:
                  action: more-info
                state:
                  - value: not_home
                    styles:
                      entity_picture:
                        - filter: grayscale(100%)
                styles:
                  card:
                    - background-color: var(--contrast2)
                    - padding: 10px 10px 10px 0px
                  grid:
                    - grid-template-areas: '"icon name btn" "icon state btn"'
                    - grid-template-columns: 60px 1fr min-content
                    - grid-template-rows: min-content
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 8px 10px
                    - border-radius: 500px
                    - border: |
                        [[[
                          if (entity.state == 'home') {
                            return '2px solid var(--green)';
                          } else {
                            return 'none';
                          }
                        ]]]
                  entity_picture:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 0 0
                    - border-radius: 500px
                  icon:
                    - width: 50px
                    - color: var(--contrast1)
                  custom_fields:
                    name:
                      - align-self: start
                      - justify-self: start
                      - background: none
                      - padding: 0
                    state:
                      - align-self: start
                      - justify-self: start
                      - background: none
                      - padding: 0
                      - margin-top: "-5px"
                    btn:
                      - align-self: end
                      - justify-self: end
                    icon:
                      - align-self: start
                      - justify-self: start
                    badge:
                      - position: absolute
                      - left: 38px
                      - top: 5px
                custom_fields:
                  name:
                    card:
                      type: custom:button-card
                      name: Silke
                      styles:
                        card:
                          - color: var(--contrast20)
                          - font-size: 14px
                          - font-weight: 600
                          - background: none
                          - box-shadow: none
                  state:
                    card:
                      type: custom:button-card
                      entity: person.silke
                      show_icon: false
                      name: |
                        [[[
                          return states['person.silke'].state;
                        ]]]
                      state:
                        - value: home
                          name: Home
                        - value: not_home
                          name: Away
                      styles:
                        card:
                          - color: var(--contrast20)
                          - font-size: 12px
                          - background: none
                          - box-shadow: none
                          - opacity: "0.7"
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: entity
                          tap_action:
                            action: more-info
                          entity: sensor.silke_handy_battery_level
                          content_info: none
                          card_mod:
                            style: |
                              ha-card {
                                --color: {{ 'var(--contrast20)' if states('sensor.silke_handy_battery_level') | float > 10  else 'var(--black)' }};
                                --chip-background: {{ 'var(--contrast1)' if states('sensor.silke_handy_battery_level') | float > 10  else 'var(--red)' }};
                                padding: 0px!important;
                                border-radius: 100px!impportant;
                                box-shadow: none !important;
                                --primary-text-color: var(--contrast20);
                  badge:
                    card:
                      type: custom:button-card
                      entity: "[[[ return entity.entity_id ]]]"
                      show_icon: true
                      show_name: false
                      icon: mdi:home
                      state:
                        - value: home
                          icon: mdi:home
                          styles:
                            card:
                              - background: var(--green)
                        - value: not_home
                          icon: mdi:home-export-outline
                          styles:
                            card:
                              - background: var(--red)
                      styles:
                        card:
                          - border-radius: 50%
                          - width: 16px
                          - height: 16px
                          - background: none
                        icon:
                          - color: black
                          - width: 12px
            columns: 2
    column_span: 2
    visibility:
      - condition: screen
        media_query: "(min-width: 768px)"

  - type: grid
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            template: custom_card_user
          - type: custom:bubble-card
            card_type: empty-column
        visibility:
          - condition: screen
            media_query: "(min-width: 0px) and (max-width: 767px)"
      - type: conditional
        conditions:
          - entity: switch.security_cameras
            state: "on"
          - condition: state
            entity: input_boolean.holiday_mode
            state: "off"
          - condition: screen
            media_query: "(min-width: 0px) and (max-width: 767px)"
        card:
          type: custom:swipe-card
          card_width: calc(100% - 48px)
          parameters:
            centeredSlides: true
            slidesPerView: auto
            spaceBetween: 16
            initialSlide: 0
          cards:
            - type: conditional
              conditions:
                - entity: switch.flur_cam_stecker
                  state: "on"
                - entity: switch.kamera_steckdose_wz
                  state: "on"
              card:
                type: custom:button-card
                entity: camera.flurcam
                show_entity_picture: true
                show_name: false
                tap_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                styles:
                  grid:
                    - grid-template-areas: '"i two" "i three"'
                    - grid-template-columns: 50% 50%
                    - grid-template-rows: 50% 50%
                  card:
                    - background: var(--contrast2)
                    - padding: 0
                    - border-radius: 16px
                  entity_picture:
                    - width: 100%
                    - height: 100%
                    - object-fit: cover
                custom_fields:
                  two:
                    card:
                      type: custom:button-card
                      entity: camera.korbchen
                      show_entity_picture: true
                      show_name: false
                      tap_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      styles:
                        card:
                          - background: var(--contrast2)
                          - padding: 0
                          - border-radius: 0px 16px 0px 0px
                          - border-left: 2px solid black
                          - border-bottom: 1px solid black
                        entity_picture:
                          - width: 100%
                          - height: 100%
            - type: conditional
              conditions:
                - entity: switch.flur_cam_stecker
                  state: "on"
              card:
                show_state: false
                show_name: false
                camera_view: live
                type: picture-entity
                tap_action:
                  action: navigate
                  navigation_path: cameras
                entity: camera.flurcam
            - type: conditional
              conditions:
                - entity: switch.kamera_steckdose_wz
                  state: "on"
              card:
                show_state: false
                show_name: false
                camera_view: live
                type: picture-entity
                tap_action:
                  action: navigate
                  navigation_path: cameras
                entity: camera.korbchen
      - type: vertical-stack
        cards:
          - type: custom:swipe-card
            card_width: 100%
            parameters:
              centeredSlides: true
              slidesPerView: auto
              spaceBetween: 16
              start_card: 1
            cards:
              - type: grid
                square: true
                columns: 5
                cards:
                  - type: custom:button-card
                    entity: light.wohnzimmer
                    show_name: false
                    aspect_ratio: 1/1
                    tap_action:
                      action: toggle
                      haptic: success
                    hold_action:
                      action: more-info
                    styles:
                      card:
                        - border-radius: 18px
                        - background-color: var(--yellow)
                      icon:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--white)";
                              else return "var(--black)";
                            ]]]
                  - type: custom:button-card
                    entity: binary_sensor.hausture
                    show_name: false
                    aspect_ratio: 1/1
                    hold_action:
                      action: more-info
                    styles:
                      card:
                        - border-radius: 18px
                        - background-color: var(--red)
                      icon:
                        - color: |
                            [[[
                              if (entity.state == "unlocked") return "var(--white)";
                              else return "var(--black)";
                            ]]]
                  - type: custom:button-card
                    entity: switch.yggdrasil_wi_fi_fritz_box_gastzugang
                    icon: mdi:wifi-off
                    show_name: false
                    aspect_ratio: 1/1
                    state:
                      - value: "on"
                        icon: mdi:wifi
                    tap_action:
                      action: toggle
                      haptic: success
                    hold_action:
                      action: more-info
                    styles:
                      card:
                        - border-radius: 18px
                        - background-color: var(--blue)
                      icon:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--white)";
                              else return "var(--black)";
                            ]]]
                  - type: custom:button-card
                    entity: switch.pi_hole
                    icon: mdi:shield-off-outline
                    show_name: false
                    aspect_ratio: 1/1
                    state:
                      - value: "on"
                        icon: mdi:shield-check
                    tap_action:
                      action: toggle
                      haptic: success
                    hold_action:
                      action: more-info
                    styles:
                      card:
                        - border-radius: 18px
                        - background-color: var(--purple)
                      icon:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--white)";
                              else return "var(--black)";
                            ]]]
              - type: custom:button-card
                styles:
                  grid:
                    - grid-template-areas: "'item1 item2 item3'"
                    - grid-template-columns: 1fr 1fr 1fr
                  card:
                    - padding: 15px
                  custom_fields:
                    item1:
                      - justify-self: start
                    item2:
                      - justify-self: center
                    item3:
                      - justify-self: end
                custom_fields:
                  item1:
                    card:
                      type: custom:button-card
                      entity: vacuum.roomba
                      icon: mdi:robot-vacuum-alert
                      name: Roomba
                      label: Error
                      show_label: true
                      state:
                        - value: docked
                          label: Docked
                          icon: mdi:robot-vacuum-off
                          styles:
                            icon:
                              - color: var(--contrast10)
                        - value: cleaning
                          label: Cleaning
                          icon: mdi:robot-vacuum
                          styles:
                            icon:
                              - color: var(--blue)
                      styles:
                        card:
                          - border-radius: 0px
                          - box-shadow: none
                          - padding-right: 5px
                        grid:
                          - grid-template-areas: "'i n' 'i l'"
                          - grid-template-columns: min-content
                          - column-gap: 10px
                        icon:
                          - width: 20px
                          - color: var(--red)
                        img_cell:
                          - width: 20px
                        name:
                          - justify-self: start
                          - font-size: 10px
                          - font-weight: 500
                          - color: var(--contrast14)
                        label:
                          - justify-self: start
                          - font-size: 15px
                          - font-weight: 700
                      tap_action:
                        action: navigate
                        navigation_path: "#vacuum"
                      double_tap_action:
                        action: more-info
        visibility:
          - condition: screen
            media_query: "(min-width: 0px) and (max-width: 767px)"
      - type: custom:decluttering-card
        template: footer_template
    visibility:
      - condition: screen
        media_query: "(min-width: 0px) and (max-width: 767px)"

  - type: grid
    cards:
      - !include ../../cards/nav_bar.yaml
      - !include ../../cards/popups/living_room.yaml
      - !include ../../cards/popups/miguel.yaml
