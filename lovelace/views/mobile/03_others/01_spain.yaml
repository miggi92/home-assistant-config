---
title: Spanien
path: spain
icon: mdi:beach
subview: true
type: sections
max_columns: 3
badges:
  - type: custom:mushroom-template-badge
    icon: mdi:arrow-left
    tap_action:
      action: navigate
      navigation_path: start
  - type: entity
    entity: binary_sensor.jemand_in_spanien
    show_name: true
    show_state: true
    show_icon: true
    state_content:
      - state
      - last_changed
  - type: entity
    entity: binary_sensor.parents_in_spain
    show_name: true
    show_state: true
    show_icon: true
    state_content:
      - state
      - last_changed
sections:
  - type: grid
    cards:
      - type: weather-forecast
        show_current: true
        show_forecast: true
        entity: weather.forecast_spanien
        forecast_type: daily
        forecast_slots: 7
      - type: weather-forecast
        show_current: false
        show_forecast: true
        entity: weather.forecast_spanien
        forecast_type: hourly
        forecast_slots: 7
  - type: grid
    cards:
      - type: custom:auto-entities
        card:
          type: entities
          title: Personen in Spanien
        filter:
          include:
            - entity_id: "zone.*spanien*"
              options:
                type: custom:template-entity-row
                state: >
                  {% set persons = states.person
                    | selectattr('state', 'eq', state_attr(config.entity, 'friendly_name'))
                    | list %}
                  {{ persons | count }} Personen
                secondary: >
                  {% set persons = states.person
                    | selectattr('state', 'eq', state_attr(config.entity, 'friendly_name'))
                    | map(attribute='attributes.friendly_name')
                    | join(', ') %}
                  {{ persons if persons | length > 0 else 'Niemand vor Ort' }}
        sort:
          method: friendly_name
  - type: grid
    cards: []
