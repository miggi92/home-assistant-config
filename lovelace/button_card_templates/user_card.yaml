---
#
custom_card_user:
  template: setup
  show_entity_picture: false
  show_icon: false
  show_label: true
  entity: |
    [[[
      return "person." + user.name.toLowerCase();
    ]]]
  name: '[[[return "Hello, " + user.name +"!"]]]'
  label: |
    [[[
      if (entity.state == "home") {
        if (user.name == "Miguel") {
          return "Room: " + states["sensor.ibeacon_pixel_9_pro_area"].state;
        } else if (user.name == "Silke") {
          return "Room: " + states["sensor.ibeacon_silke_handy_area"].state;
        } else {
          return "Welcome home.";
        }
      } else {
        return "See you later.";
      }
    ]]]
  tap_action:
    action: navigate
    navigation_path: settings
  state:
    - value: not_home
      styles:
        entity_picture:
          - filter: grayscale(100%)
  styles:
    card:
      - padding: 12px 0px 12px 12px
      - background: none
      - box-shadow: none
    grid:
      - grid-template-areas: '"pic n one two three four" "pic l one two three four"'
      - grid-template-rows: min-content min-content min-content
      - grid-template-columns: 50px 1fr 50px 50px 50px 50px
    name:
      - justify-self: start
      - align-self: center
      - font-weight: 700
      - font-size: 15px
      - padding-left: 15px
    label:
      - justify-self: start
      - align-self: start
      - font-size: 12px
      - font-weight: 500
      - color: var(--contrast14)
      - padding-left: 15px
    entity_picture:
      - width: 40px
      - height: 40px
      - border-radius: 12px
    custom_fields:
      badge:
        - position: absolute
        - left: 47px
        - top: 9px
  custom_fields:
    badge:
      card:
        type: custom:button-card
        entity: "[[[ return entity.entity_id ]]]"
        show_icon: true
        show_name: false
        icon: mdi:account-tie-voice
        state:
          - value: not_home
            styles:
              card:
                - background: var(--red)
        styles:
          card:
            - border-radius: 50%
            - width: 16px
            - height: 16px
            - background: var(--green)
            - z-index: 1
          icon:
            - color: var(--black)
            - width: 10px
    pic:
      card:
        type: custom:button-card
        entity: |
          [[[
            return entity.entity_id;
          ]]]
        show_name: false
        show_entity_picture: true
        state:
          - value: home
            styles:
              entity_picture:
                - filter: none
        double_tap_action:
          action: assist
          pipeline_id: preferred
        styles:
          card:
            - background: none
            - box-shadow: none
          entity_picture:
            - width: 40px
            - height: 40px
            - border-radius: 12px
            - filter: grayscale(100%)
          img_cell:
            - background-color: var(--contrast1)
            - width: 40px
            - height: 40px
            - border-radius: 12px
    one:
      card:
        type: custom:button-card
        entity: |
          [[[
            if (user.name == "Miguel") return "person.silke";
            else return "person.miguel";
          ]]]
        show_name: false
        show_entity_picture: true
        state:
          - value: home
            styles:
              entity_picture:
                - filter: none
                - opacity: 1
        styles:
          card:
            - background: none
            - box-shadow: none
            - z-index: 5
            - margin-left: 60px
          entity_picture:
            - width: 40px
            - height: 40px
            - border-radius: 12px
            - filter: grayscale(100%)
            - opacity: 0.5
          img_cell:
            - background-color: var(--contrast1)
            - width: 40px
            - height: 40px
            - border-radius: 12px
    two:
      card:
        type: custom:button-card
        entity: person.milo_carlos
        show_name: false
        show_entity_picture: true
        state:
          - value: not_home
            styles:
              entity_picture:
                - filter: none
                - opacity: 1
        styles:
          card:
            - background: none
            - box-shadow: none
            - z-index: 4
            - margin-left: 40px
          entity_picture:
            - width: 40px
            - height: 40px
            - border-radius: 12px
            - filter: grayscale(100%)
            - opacity: 0.5
          img_cell:
            - background-color: var(--contrast1)
            - width: 40px
            - height: 40px
            - border-radius: 12px
    three:
      card:
        type: custom:button-card
        entity: person.maja
        show_name: false
        show_entity_picture: true
        state:
          - value: home
            styles:
              entity_picture:
                - filter: none
                - opacity: 1
        styles:
          card:
            - background: none
            - box-shadow: none
            - z-index: 3
            - margin-left: 20px
          entity_picture:
            - width: 40px
            - height: 40px
            - border-radius: 12px
            - filter: grayscale(100%)
            - opacity: 0.5
          img_cell:
            - background-color: var(--contrast1)
            - width: 40px
            - height: 40px
            - border-radius: 12px
