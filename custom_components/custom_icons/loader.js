const t=Object.freeze({left:0,top:0,width:16,height:16}),e=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),o=Object.freeze({...t,...e});Object.freeze({...o,body:"",hidden:!1});const n=Object.freeze({width:null,height:null}),i=Object.freeze({...n,...e}),s=/(-?[0-9.]*[0-9]+[0-9.]*)/g,c=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function a(t,e,o){if(1===e)return t;if(o=o||100,"number"==typeof t)return Math.ceil(t*e*o)/o;if("string"!=typeof t)return t;const n=t.split(s);if(null===n||!n.length)return t;const i=[];let a=n.shift(),r=c.test(a);for(;;){if(r){const t=parseFloat(a);isNaN(t)?i.push(a):i.push(Math.ceil(t*e*o)/o)}else i.push(a);if(a=n.shift(),void 0===a)return i.join("");r=!r}}async function r(){const t=await async function(){await Promise.race([customElements.whenDefined("home-assistant"),customElements.whenDefined("hc-main")]);const t=customElements.get("home-assistant")?"home-assistant":"hc-main";for(;!document.querySelector(t);)await new Promise((t=>window.setTimeout(t,100)));return document.querySelector(t)}();for(;!t.hass;)await new Promise((t=>window.setTimeout(t,100)));return t.hass}const h=t=>{var e,n;if(!t)return null;let s;return"iconify"==t.renderer?s=function(t,e){const n={...o,...t},s={...i,...e},c={left:n.left,top:n.top,width:n.width,height:n.height};let r=n.body;[n,s].forEach((t=>{const e=[],o=t.hFlip,n=t.vFlip;let i,s=t.rotate;switch(o?n?s+=2:(e.push("translate("+(c.width+c.left).toString()+" "+(0-c.top).toString()+")"),e.push("scale(-1 1)"),c.top=c.left=0):n&&(e.push("translate("+(0-c.left).toString()+" "+(c.height+c.top).toString()+")"),e.push("scale(1 -1)"),c.top=c.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4,s){case 1:i=c.height/2+c.top,e.unshift("rotate(90 "+i.toString()+" "+i.toString()+")");break;case 2:e.unshift("rotate(180 "+(c.width/2+c.left).toString()+" "+(c.height/2+c.top).toString()+")");break;case 3:i=c.width/2+c.left,e.unshift("rotate(-90 "+i.toString()+" "+i.toString()+")")}s%2==1&&(c.left!==c.top&&(i=c.left,c.left=c.top,c.top=i),c.width!==c.height&&(i=c.width,c.width=c.height,c.height=i)),e.length&&(r=function(t,e,o){const n=function(t,e="defs"){let o="";const n=t.indexOf("<"+e);for(;n>=0;){const i=t.indexOf(">",n),s=t.indexOf("</"+e);if(-1===i||-1===s)break;const c=t.indexOf(">",s);if(-1===c)break;o+=t.slice(i+1,s).trim(),t=t.slice(0,n).trim()+t.slice(c+1)}return{defs:o,content:t}}(t);return i=n.defs,s=e+n.content+o,i?"<defs>"+i+"</defs>"+s:s;var i,s}(r,'<g transform="'+e.join(" ")+'">',"</g>"))}));const h=s.width,l=s.height,u=c.width,d=c.height;let f,w;null===h?(w=null===l?"1em":"auto"===l?d:l,f=a(w,u/d)):(f="auto"===h?u:h,w=null===l?a(f,d/u):"auto"===l?d:l);const m={},p=(t,e)=>{(t=>"unset"===t||"undefined"===t||"none"===t)(e)||(m[t]=e.toString())};p("width",f),p("height",w);const g=[c.left,c.top,u,d];return m.viewBox=g.join(" "),{attributes:m,viewBox:g,body:r}}(t):(s=t,s.attributes={height:"1em",width:"1em",viewBox:t.viewBox.join(" ")}),{path:null!==(e=t.path)&&void 0!==e?e:"",secondaryPath:null!==(n=t.path2)&&void 0!==n?n:"",viewBox:s.viewBox,format:"custom_icons",innerSVG:s.body,attributes:s.attributes}},l={},u={};window.icon_cache=l;const d=[],f=async t=>{const e=(await r()).connection,o=await e.sendMessagePromise({type:"custom_icons/icon_cache",set:t});for(const e of o)l[t][e.icon]=h(e)},w=async()=>{const t=d.shift();if(void 0!==t){let e,o,n;[o,n,e]=t;const i=await(async(t,e)=>{var o;if(e.includes("#")&&(e=e.split("#")[0]),!(null===(o=l[t])||void 0===o?void 0:o[e])){if(!(await p(t)).some((t=>t.name==e)))return{path:"",viewBox:[0,0,0,0]};const o=(await r()).connection,n=await o.sendMessagePromise({type:"custom_icons/icon",set:t,icon:e});l[t][e]=h(n)}return l[t][e]})(o,n);e(i),setTimeout(w,1)}else setTimeout(w,50)},m=(t,e)=>new Promise((o=>d.push([t,e,o])));w();const p=async t=>{if(!u[t]){const e=(await r()).connection;u[t]=await e.sendMessagePromise({type:"custom_icons/list",set:t})}return u[t]};(async()=>{const t=(await r()).connection,e=await t.sendMessagePromise({type:"custom_icons/activesets"}),o=window;"customIcons"in o||(o.customIcons={});for(const t of e)l[t]={},o.customIcons[t]={getIcon:e=>m(t,e),getIconList:()=>p(t)},f(t);const n=(t,n)=>{e.includes(t)&&(o.customIcons[n]={getIcon:e=>m(t,e),getIconList:()=>[]})};n("local","fapro"),n("fa6-regular","far"),n("fa6-solid","fas"),n("fa6-brands","fab")})(),customElements.whenDefined("ha-icon").then((()=>{const t=customElements.get("ha-icon"),e=t.prototype._setCustomPath;t.prototype._setCustomPath=async function(t,o){var n;await(null===(n=null==e?void 0:e.bind(this))||void 0===n?void 0:n(t,o));const i=await t;if(o!==this.icon)return;if(!i.innerSVG||"custom_icons"!==i.format)return;await this.UpdateComplete;const s=this.shadowRoot.querySelector("ha-svg-icon");await(null==s?void 0:s.updateComplete);const c=null==s?void 0:s.shadowRoot.querySelector("svg");if(c){this._path=void 0,this._secondaryPath=void 0;let t=c.querySelector(".customIcon");t||(t=document.createElementNS("http://www.w3.org/2000/svg","g"),t.setAttribute("class","customIcon"),c.appendChild(t)),t.innerHTML=i.innerSVG}};const o=t.prototype._loadIcon;t.prototype._loadIcon=async function(){var t;await(null===(t=null==o?void 0:o.bind(this))||void 0===t?void 0:t()),this.icon&&"custom_icons"!==this.icon.format&&this.updateComplete.then((async()=>{const t=this.shadowRoot.querySelector("ha-svg-icon");await(null==t?void 0:t.updateComplete);const e=null==t?void 0:t.shadowRoot.querySelector(".customIcon");e&&e.remove()})),this._legacy&&!this._legacyReloaded&&window.setTimeout((()=>{this._legacy=!1,this._legacyReloaded=!0,this._loadIcon()}),1e3)}}));
